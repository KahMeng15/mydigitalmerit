<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Push Merit Values - Digital Merit System</title>
    <style>
        body { font-family: sans-serif; margin: 2em; }
        .container { max-width: 800px; margin: 0 auto; }
        .btn { padding: 10px 20px; border: none; background-color: #007bff; color: white; cursor: pointer; }
        #status { margin-top: 1em; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Push Merit Values to Firestore</h1>
        <p>Click the button to upload the predefined merit values to the Firestore database. This will overwrite any existing data in the 'meritvalue' collection.</p>
        <button id="pushBtn" class="btn">Push Merit Values</button>
        <div id="status"></div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDd9r8u2fr9pboTbV2DGNbmhBj20Ma5zTI",
            authDomain: "mydigitalmerit.firebaseapp.com",
            projectId: "mydigitalmerit",
            storageBucket: "mydigitalmerit.firebasestorage.app",
            messagingSenderId: "69229862912",
            appId: "1:69229862912:web:aa0ef177a855ffad23f8e5",
            measurementId: "G-BM39BHXZ9D"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const firestore = firebase.firestore();

        document.getElementById('pushBtn').addEventListener('click', async () => {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = 'Pushing data...';

            const meritData = {
                "Block Level": {
                    "Program Director": 4,
                    "Deputy Program Director": 4,
                    "Secretary": 3,
                    "Deputy Secretary": 3,
                    "Treasurer": 3,
                    "Deputy Treasurer": 3,
                    "Committee Member": 2,
                    "Volunteer": 2,
                    "Emcee": 2,
                    "Jury": 2,
                    "Participant": 1
                },
                "College Level": {
                    "Program Director": 6,
                    "Deputy Program Director": 5,
                    "Secretary": 5,
                    "Deputy Secretary": 5,
                    "Treasurer": 5,
                    "Deputy Treasurer": 5,
                    "Committee Member": 4,
                    "Volunteer": 4,
                    "Emcee": 3,
                    "Jury": 3,
                    "Participant": 2
                },
                "University Level": {
                    "Program Director": 10,
                    "Deputy Program Director": 7,
                    "Secretary": 7,
                    "Deputy Secretary": 7,
                    "Treasurer": 7,
                    "Deputy Treasurer": 7,
                    "Committee Member": 5,
                    "Volunteer": 5,
                    "Emcee": 4,
                    "Jury": 4,
                    "Participant": 3
                },
                "National Level": {
                    "Program Director": 13,
                    "Deputy Program Director": 8,
                    "Secretary": 8,
                    "Deputy Secretary": 8,
                    "Treasurer": 8,
                    "Deputy Treasurer": 8,
                    "Committee Member": 6,
                    "Volunteer": 6,
                    "Emcee": 5,
                    "Jury": 5,
                    "Participant": 4
                },
                "International Level": {
                    "Program Director": 15,
                    "Deputy Program Director": 10,
                    "Secretary": 10,
                    "Deputy Secretary": 10,
                    "Treasurer": 10,
                    "Deputy Treasurer": 10,
                    "Committee Member": 8,
                    "Volunteer": 8,
                    "Emcee": 6,
                    "Jury": 6,
                    "Participant": 5
                }
            };

            try {
                const batch = firestore.batch();
                for (const level in meritData) {
                    const docRef = firestore.collection('meritvalue').doc(level);
                    batch.set(docRef, meritData[level]);
                }
                await batch.commit();
                statusDiv.innerHTML = 'Successfully pushed merit values to Firestore!';
                console.log('Successfully pushed merit values to Firestore!');
            } catch (error) {
                statusDiv.innerHTML = `Error pushing data: ${error}`;
                console.error('Error pushing data: ', error);
            }
        });
    </script>
</body>
</html>